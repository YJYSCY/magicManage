import{_ as Y,r as a,o as z,c as m,a as r,b as U,d as P,e as I,F as $,f as X,w as y,E as H,n as j,g as d,h as L}from"./index-BFow_mbm.js";import{E as q,S as G,a as K,b as Q}from"./sortable.esm-BEIlbFJ3.js";const W={class:"drag-page"},Z={class:"area-box"},ee=["onClick"],le=["src"],te={class:"area-box"},ae=["onClick"],se=["src"],oe={class:"add-btn"},u=5,ne={__name:"smallMagicManage",setup(ie){const v=a([]),c=a([]),V=a(null),x=a(null),g=a(null),E=a(null),b=a(null),k=a(!1),S=a(!1),f=a(!1),_=a(""),M=a("A"),w=a(!1),h=a(""),A=s=>{h.value=s,w.value=!0},B=()=>{sessionStorage.setItem("smallMagicList",JSON.stringify(v.value)),sessionStorage.setItem("allImageList",JSON.stringify(c.value))},D=()=>{const s=JSON.parse(sessionStorage.getItem("smallMagicList")||"[]"),e=JSON.parse(sessionStorage.getItem("allImageList")||"[]");v.value=s.length?s:[],c.value=e.length?e:[]},F=s=>{M.value=s,_.value="",f.value=!0},J=()=>{if(!_.value)return;const s={id:Date.now(),url:_.value};c.value.push(s),B(),f.value=!1};function O(){document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"}function T(s=50){setTimeout(()=>{document.body.style.overflow="",document.documentElement.style.overflow=""},s)}const N=(s,e,p)=>{G.create(s.value,{animation:150,group:"shared",forceFallback:!0,scroll:!1,onStart(o){const t=e.value[o.oldIndex];t&&(o.item.__dragId=t.id,E.value=t,b.value=p,k.value=!0,O())},onMove(o){if(!g.value)return;const t=o.originalEvent;let n,l;if(t?.clientX!=null)n=t.clientX,l=t.clientY;else if(t?.touches?.length)n=t.touches[0].clientX,l=t.touches[0].clientY;else{S.value=!1;return}const i=g.value.getBoundingClientRect();S.value=n>=i.left-u&&n<=i.right+u&&l>=i.top-u&&l<=i.bottom+u},onEnd(o){const t=o.originalEvent;if(o.from===o.to){const n=e.value.splice(o.oldIndex,1)[0];e.value.splice(o.newIndex,0,n)}if(k.value&&g.value&&t){const n=g.value.getBoundingClientRect(),l=t.clientX??t?.touches?.[0]?.clientX,i=t.clientY??t?.touches?.[0]?.clientY;if(l>=n.left-u&&l<=n.right+u&&i>=n.top-u&&i<=n.bottom+u){const R=o.item.__dragId;b.value==="A"?v.value=v.value.filter(C=>C.id!==R):c.value=c.value.filter(C=>C.id!==R)}}B(),E.value=null,b.value=null,k.value=!1,S.value=!1,T(60)}})};return z(()=>{D(),N(V,v,"A"),N(x,c,"B")}),(s,e)=>{const p=H,o=K,t=Q,n=q;return d(),m("div",W,[r("div",Z,[e[5]||(e[5]=r("span",{class:"title"},"Small Magic Cube",-1)),r("div",{ref_key:"smallMagicListRef",ref:V,class:"img-list"},[(d(!0),m($,null,X(v.value,l=>(d(),m("div",{key:l.id,class:"img-item",onClick:i=>A(l.url)},[r("img",{src:l.url,alt:""},null,8,le)],8,ee))),128))],512)]),r("div",te,[e[7]||(e[7]=r("span",{class:"title"},"All Image",-1)),r("div",{ref_key:"allImageListRef",ref:x,class:"img-list"},[(d(!0),m($,null,X(c.value,l=>(d(),m("div",{key:l.id,class:"img-item",onClick:i=>A(l.url)},[r("img",{src:l.url,alt:""},null,8,se)],8,ae))),128))],512),r("div",oe,[I(p,{type:"primary",size:"large",onClick:e[0]||(e[0]=l=>F())},{default:y(()=>e[6]||(e[6]=[L("添 加 图 片")])),_:1,__:[6]})])]),k.value?(d(),m("div",{key:0,ref_key:"deleteAreaRef",ref:g,class:j(["trash-area",{hover:S.value}])}," 🗑 ",2)):U("",!0),w.value?(d(),P(o,{key:1,"url-list":[h.value],onClose:e[1]||(e[1]=l=>w.value=!1)},null,8,["url-list"])):U("",!0),I(n,{title:`添加图片 URL 到 ${M.value==="A"?"A":"B"}`,modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=l=>f.value=l)},{footer:y(()=>[I(p,{onClick:e[3]||(e[3]=l=>f.value=!1)},{default:y(()=>e[8]||(e[8]=[L("取消")])),_:1,__:[8]}),I(p,{type:"primary",onClick:J},{default:y(()=>e[9]||(e[9]=[L("确认")])),_:1,__:[9]})]),default:y(()=>[I(t,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=l=>_.value=l),placeholder:"请输入图片 URL"},null,8,["modelValue"])]),_:1},8,["title","modelValue"])])}}},ce=Y(ne,[["__scopeId","data-v-653032f0"]]);export{ce as default};
